#!/usr/bin/env bash
bspc config border_width            2
bspc config window_gap              5

bspc config                  split_ratio  0.5
bspc config           borderless_monocle  true
bspc config              gapless_monocle  true
bspc config        focus_follows_pointer  false
bspc config               click_to_focus  true
bspc config          normal_border_color  ${FG}
bspc config         focused_border_color  ${BLUE}
bspc config          active_border_color  ${BLUE2}
bspc config        presel_feedback_color  ${BG}

bspc rule -a "Spotify" desktop=^5
bspc rule -a "Chromium-browser:crx_eggkanocgddhmamlbiijnphhppkpkmkl" state=floating
bspc rule -a "mpv" state=floating

max_displays=10

monitors=( `bspc query -M | tr '\n' ' '` )
displays_per_mon=$(( $max_displays / ${#monitors[@]} ))

for i in ${!monitors[@]}; do
    monitor=${monitors[$i]} 

    let i++

    names=()
    for j in `seq $displays_per_mon`; do
        names+=("$i/$j")
    done

    bspc monitor $monitor -n $i -d ${names[@]}
    bspc desktop $i/1 -l monocle
done

MONITOR=eDP1 polybar -r top-small&
MONITOR=DP1 polybar -r top-big-tray&
for m in `polybar -m | grep -vE 'eDP1|DP1' | cut -d' ' -f1 | tr -d ':'`; do
    MONITOR=$m polybar -r top-big&
done
